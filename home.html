<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
    <link rel="stylesheet" href="stylesheets.css" />
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js"></script>
  </head>
  <body style="background-image: url(assets/bgr-rpt.png);
  background-size:600px;  /* To make the image cover the whole page */
  background-position: center; /* To center the image */">
    <!-- Header Section -->

    <div class="header"></body>
    
      <div class="header-buttons">
        <button id="Profile" class="header-nav-button">User Profile</button>
      </div>
      <img src="assets/logo.png" alt="Logo" class="header-logo" />
      <div class="header-buttons">
        <button id="sign-out-btn" class="header-nav-button">Sign Out</button>
      </div>
    </div>
    <h2 id = "playerName"></h2>
    <!-- Main Section -->
    <div class="main-section">
      <div class="custom-cursor"></div>
      <div class="slider-container">
        <div class="slider"></div>
      </div>
    
        <a id="match" href="./public/index.html"><button>Match</button></a>

    <!-- Sign Out Script DO NOT TOUCH VERY FRAGILE-->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script>
    
      // Firebase Config (same as index.html)
      const firebaseConfig = {
        apiKey: "AIzaSyBmPhTISj7AWQYJghPzrSYcKW7SvF1AxLQ",
        authDomain: "university-interview-simulator.firebaseapp.com",
        projectId: "university-interview-simulator",
        storageBucket: "university-interview-simulator.firebasestorage.app",
        messagingSenderId: "783489524635",
        appId: "1:783489524635:web:25c8ba55626cc8296af73e",
        measurementId: "G-S3WWD69934",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      // Sign-out button functionality
      const signOutBtn = document.getElementById("sign-out-btn");
      signOutBtn.addEventListener("click", () => {
        firebase
          .auth()
          .signOut()
          .then(() => {
            window.location.href = "main.html"; // Redirect to login page
          })
          .catch((error) => {
            console.error("Sign-out error:", error);
            alert("Error signing out. Please try again.");
          });
          localStorage.removeItem("profileName") ; 
          localStorage.removeItem("bio-info");
          sessionStorage.removeItem("tags") ; 
      });
      const profileBtn = document.getElementById("Profile");
      profileBtn.addEventListener("click", () => {
        window.location.href = "profile.html";
      });
      class Slider {
        constructor() {
          this.container = document.querySelector(".slider-container");
          this.slider = document.querySelector(".slider");
          this.cursor = document.querySelector(".custom-cursor");
          this.slideWidth = 420; // 400px + 20px margin

          // Configuration des images
          this.images = [
            "https://www.santarosaforward.com/img/managed/Image/111/file.jpg",
            "https://www.santarosaforward.com/img/managed/Image/111/file.jpg",
            "https://www.santarosaforward.com/img/managed/Image/111/file.jpg",
            "https://www.santarosaforward.com/img/managed/Image/111/file.jpg",
            "https://www.santarosaforward.com/img/managed/Image/111/file.jpg",
          ];

          this.currentIndex = 0;
          this.isAnimating = false;

          this.init();
        }

        init() {
          this.createSlides();
          this.setupEventListeners();
          this.positionSlides();
          this.startAutoplay();
        }

        createSlides() {
  const totalSlides = this.images.length * 3; // We still need to repeat the slides to create an infinite effect.
  for (let i = 0; i < totalSlides; i++) {
    const index = i % this.images.length;
    
    // Create the slide
    const slide = document.createElement("div");
    slide.className = "slide";
    
    // Create the card content
    slide.innerHTML = `
      <div class="card">
  <div class="card-header">
    <img src="assets/card-img1.png" alt="Card image" class="card-image">
  </div>
  <div class="card-body">
    <h3>Card Title ${index + 1}</h3>
    <p>This is some content for card ${index + 1}. You can add more information here.</p>
  </div>
</div>
    `;
    
    this.slider.appendChild(slide);
  }
}


        positionSlides() {
          const slides = this.slider.querySelectorAll(".slide");
          const offset = (this.container.offsetWidth - this.slideWidth) / 2;
          const baseTransform = -this.currentIndex * this.slideWidth + offset;

          this.slider.style.transform = `translateX(${baseTransform}px)`;

          // Mettre à jour la slide active
          slides.forEach((slide, index) => {
            const normalizedIndex = this.normalizeIndex(index);
            slide.classList.toggle(
              "active",
              normalizedIndex === this.currentIndex % this.images.length
            );
          });
        }

        normalizeIndex(index) {
          return index % this.images.length;
        }

        moveSlides(direction) {
          if (this.isAnimating) return;
          this.isAnimating = true;

          const slides = this.slider.querySelectorAll(".slide");
          this.currentIndex += direction;

          // Animer le mouvement
          this.slider.style.transition = "transform 0.3s ease-out";
          this.positionSlides();

          // Réinitialiser la position si nécessaire
          if (
            this.currentIndex >= this.images.length * 2 ||
            this.currentIndex <= this.images.length - 1
          ) {
            setTimeout(() => {
              this.slider.style.transition = "none";
              this.currentIndex =
                this.currentIndex >= this.images.length * 2
                  ? this.currentIndex - this.images.length
                  : this.currentIndex + this.images.length;
              this.positionSlides();
            }, 300);
          }

          setTimeout(() => {
            this.isAnimating = false;
          }, 300);
        }

        setupEventListeners() {
          // Mouvement du curseur
          document.addEventListener("mousemove", (e) => {
            this.cursor.style.left = `${e.clientX - 25}px`;
            this.cursor.style.top = `${e.clientY - 25}px`;

            const rect = this.container.getBoundingClientRect();
            const isLeft = e.clientX < rect.left + rect.width / 2;

            this.cursor.classList.toggle("left", isLeft);
            this.cursor.classList.toggle("right", !isLeft);
          });

          // Interaction avec le slider
          this.container.addEventListener("mouseenter", () => {
            this.cursor.style.opacity = "1";
            this.stopAutoplay();
          });

          this.container.addEventListener("mouseleave", () => {
            this.cursor.style.opacity = "0";
            this.startAutoplay();
          });

          this.container.addEventListener("click", (e) => {
            const rect = this.container.getBoundingClientRect();
            const isLeft = e.clientX < rect.left + rect.width / 2;

            this.moveSlides(isLeft ? -1 : 1);

            // Animation du curseur
            this.cursor.classList.add("active");
            setTimeout(() => this.cursor.classList.remove("active"), 300);
          });

          // Ajuster au redimensionnement
          window.addEventListener("resize", () => this.positionSlides());
        }

        startAutoplay() {
          this.stopAutoplay();
          this.autoplayInterval = setInterval(() => {
            this.moveSlides(1);
          }, 3000);
        }

        stopAutoplay() {
          if (this.autoplayInterval) {
            clearInterval(this.autoplayInterval);
          }
        }
      }

      // Initialiser le slider quand le DOM est chargé
      document.addEventListener("DOMContentLoaded", () => {
        new Slider();
      });
    
    </script>
  </body>
</html>
